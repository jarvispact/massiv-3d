!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n=r();for(var e in n)("object"==typeof exports?exports:t)[e]=n[e]}}(window,function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)n.d(e,o,function(r){return t[r]}.bind(null,o));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=14)}([function(t,r,n){"use strict";const e=n(5),o=n(8),i=Math.pow(2,31)-1,u=n(9).Buffer;function a(t,r){var n=u.from(o.parse(t)).toString("base64");return r?n.replace(/\+/g,"_").replace(/\//g,"-").replace(/==$/,"-"):n.replace(/==$/,"/")}function f(t,r){!!(r=r||{}).urlSafe&&(t=t.replace(/-/g,"/").replace(/_/g,"+"));const n=t.match(/(.*)+\/(\d+)+$/);return n?{uuid:o.unparse(u.from(n[1]+"==","base64")),count:parseInt(n[2])}:null}t.exports=function(t){var r=!1,n=!1;"boolean"==typeof t?r=t:(n=!!(t=t||{}).urlSafe,r=!!t.fixedLength);var o=0;c.uuid=e();var u=a(c.uuid,n);function c(){var t=r?u+function(t){return t<10?"000000000"+t:t<100?"00000000"+t:t<1e3?"0000000"+t:t<1e4?"000000"+t:t<1e5?"00000"+t:t<1e6?"0000"+t:t<1e7?"000"+t:t<1e8?"00"+t:t<1e9?"0"+t:void 0}(o++):u+o++;return o===i&&(c.uuid=e(),u=a(c.uuid,n),o=0),t}return c.decode=f,c},t.exports.decode=f},,,,,function(t,r,n){var e=n(6),o=n(7);t.exports=function(t,r,n){var i=r&&n||0;"string"==typeof t&&(r="binary"===t?new Array(16):null,t=null);var u=(t=t||{}).random||(t.rng||e)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r)for(var a=0;a<16;++a)r[i+a]=u[a];return r||o(u)}},function(t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var e=new Uint8Array(16);t.exports=function(){return n(e),e}}else{var o=new Array(16);t.exports=function(){for(var t,r=0;r<16;r++)0==(3&r)&&(t=4294967296*Math.random()),o[r]=t>>>((3&r)<<3)&255;return o}}},function(t,r){for(var n=[],e=0;e<256;++e)n[e]=(e+256).toString(16).substr(1);t.exports=function(t,r){var e=r||0,o=n;return[o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],"-",o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]],o[t[e++]]].join("")}},function(t,r,n){"use strict";for(var e=[],o={},i=0;i<256;i++)e[i]=(i+256).toString(16).substr(1),o[e[i]]=i;t.exports={parse:function(t,r,n){var e=r&&n||0,i=0;for(r=r||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(r[e+i++]=o[t])});i<16;)r[e+i++]=0;return r},unparse:function(t,r){var n=r||0,o=e;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}}},function(t,r,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var e=n(11),o=n(12),i=n(13);function u(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,r){if(u()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,n){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,n);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,r,n)}function c(t,r,n,e){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(t,r,n,e){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(e||0))throw new RangeError("'length' is out of bounds");r=void 0===n&&void 0===e?new Uint8Array(r):void 0===e?new Uint8Array(r,n):new Uint8Array(r,n,e);f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=l(t,r);return t}(t,r,n,e):"string"==typeof r?function(t,r,n){"string"==typeof n&&""!==n||(n="utf8");if(!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var e=0|d(r,n),o=(t=a(t,e)).write(r,n);o!==e&&(t=t.slice(0,o));return t}(t,r,n):function(t,r){if(f.isBuffer(r)){var n=0|p(r.length);return 0===(t=a(t,n)).length?t:(r.copy(t,0,0,n),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(e=r.length)!=e?a(t,0):l(t,r);if("Buffer"===r.type&&i(r.data))return l(t,r.data)}var e;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,r){if(s(r),t=a(t,r<0?0:0|p(r)),!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)t[n]=0;return t}function l(t,r){var n=r.length<0?0:0|p(r.length);t=a(t,n);for(var e=0;e<n;e+=1)t[e]=255&r[e];return t}function p(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function d(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var e=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(e)return F(t).length;r=(""+r).toLowerCase(),e=!0}}function y(t,r,n){var e=t[r];t[r]=t[n],t[n]=e}function v(t,r,n,e,o){if(0===t.length)return-1;if("string"==typeof n?(e=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=f.from(r,e)),f.isBuffer(r))return 0===r.length?-1:b(t,r,n,e,o);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):b(t,[r],n,e,o);throw new TypeError("val must be string, number or Buffer")}function b(t,r,n,e,o){var i,u=1,a=t.length,f=r.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(t.length<2||r.length<2)return-1;u=2,a/=2,f/=2,n/=2}function c(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(o){var s=-1;for(i=n;i<a;i++)if(c(t,i)===c(r,-1===s?0:i-s)){if(-1===s&&(s=i),i-s+1===f)return s*u}else-1!==s&&(i-=i-s),s=-1}else for(n+f>a&&(n=a-f),i=n;i>=0;i--){for(var h=!0,l=0;l<f;l++)if(c(t,i+l)!==c(r,l)){h=!1;break}if(h)return i}return-1}function m(t,r,n,e){n=Number(n)||0;var o=t.length-n;e?(e=Number(e))>o&&(e=o):e=o;var i=r.length;if(i%2!=0)throw new TypeError("Invalid hex string");e>i/2&&(e=i/2);for(var u=0;u<e;++u){var a=parseInt(r.substr(2*u,2),16);if(isNaN(a))return u;t[n+u]=a}return u}function g(t,r,n,e){return V(F(r,t.length-n),t,n,e)}function M(t,r,n,e){return V(function(t){for(var r=[],n=0;n<t.length;++n)r.push(255&t.charCodeAt(n));return r}(r),t,n,e)}function w(t,r,n,e){return M(t,r,n,e)}function E(t,r,n,e){return V(q(r),t,n,e)}function A(t,r,n,e){return V(function(t,r){for(var n,e,o,i=[],u=0;u<t.length&&!((r-=2)<0);++u)n=t.charCodeAt(u),e=n>>8,o=n%256,i.push(o),i.push(e);return i}(r,t.length-n),t,n,e)}function _(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function S(t,r,n){n=Math.min(t.length,n);for(var e=[],o=r;o<n;){var i,u,a,f,c=t[o],s=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=n)switch(h){case 1:c<128&&(s=c);break;case 2:128==(192&(i=t[o+1]))&&(f=(31&c)<<6|63&i)>127&&(s=f);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&(f=(15&c)<<12|(63&i)<<6|63&u)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:i=t[o+1],u=t[o+2],a=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&a)&&(f=(15&c)<<18|(63&i)<<12|(63&u)<<6|63&a)>65535&&f<1114112&&(s=f)}null===s?(s=65533,h=1):s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s),o+=h}return function(t){var r=t.length;if(r<=x)return String.fromCharCode.apply(String,t);var n="",e=0;for(;e<r;)n+=String.fromCharCode.apply(String,t.slice(e,e+=x));return n}(e)}r.Buffer=f,r.SlowBuffer=function(t){+t!=t&&(t=0);return f.alloc(+t)},r.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=u(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,n){return c(null,t,r,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,n){return function(t,r,n,e){return s(r),r<=0?a(t,r):void 0!==n?"string"==typeof e?a(t,r).fill(n,e):a(t,r).fill(n):a(t,r)}(null,t,r,n)},f.allocUnsafe=function(t){return h(null,t)},f.allocUnsafeSlow=function(t){return h(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,e=r.length,o=0,i=Math.min(n,e);o<i;++o)if(t[o]!==r[o]){n=t[o],e=r[o];break}return n<e?-1:e<n?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var e=f.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var u=t[n];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(e,o),o+=u.length}return e},f.byteLength=d,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)y(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)y(this,r,r+3),y(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)y(this,r,r+7),y(this,r+1,r+6),y(this,r+2,r+5),y(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,r,n){var e=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,r,n);case"utf8":case"utf-8":return S(this,r,n);case"ascii":return P(this,r,n);case"latin1":case"binary":return R(this,r,n);case"base64":return _(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,r,n);default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",n=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,n,e,o){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===e&&(e=0),void 0===o&&(o=this.length),r<0||n>t.length||e<0||o>this.length)throw new RangeError("out of range index");if(e>=o&&r>=n)return 0;if(e>=o)return-1;if(r>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(e>>>=0),u=(n>>>=0)-(r>>>=0),a=Math.min(i,u),c=this.slice(e,o),s=t.slice(r,n),h=0;h<a;++h)if(c[h]!==s[h]){i=c[h],u=s[h];break}return i<u?-1:u<i?1:0},f.prototype.includes=function(t,r,n){return-1!==this.indexOf(t,r,n)},f.prototype.indexOf=function(t,r,n){return v(this,t,r,n,!0)},f.prototype.lastIndexOf=function(t,r,n){return v(this,t,r,n,!1)},f.prototype.write=function(t,r,n,e){if(void 0===r)e="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)e=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(n)?(n|=0,void 0===e&&(e="utf8")):(e=n,n=void 0)}var o=this.length-r;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(var i=!1;;)switch(e){case"hex":return m(this,t,r,n);case"utf8":case"utf-8":return g(this,t,r,n);case"ascii":return M(this,t,r,n);case"latin1":case"binary":return w(this,t,r,n);case"base64":return E(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),i=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function P(t,r,n){var e="";n=Math.min(t.length,n);for(var o=r;o<n;++o)e+=String.fromCharCode(127&t[o]);return e}function R(t,r,n){var e="";n=Math.min(t.length,n);for(var o=r;o<n;++o)e+=String.fromCharCode(t[o]);return e}function T(t,r,n){var e=t.length;(!r||r<0)&&(r=0),(!n||n<0||n>e)&&(n=e);for(var o="",i=r;i<n;++i)o+=Y(t[i]);return o}function O(t,r,n){for(var e=t.slice(r,n),o="",i=0;i<e.length;i+=2)o+=String.fromCharCode(e[i]+256*e[i+1]);return o}function B(t,r,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,r,n,e,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<i)throw new RangeError('"value" argument is out of bounds');if(n+e>t.length)throw new RangeError("Index out of range")}function j(t,r,n,e){r<0&&(r=65535+r+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(r&255<<8*(e?o:1-o))>>>8*(e?o:1-o)}function U(t,r,n,e){r<0&&(r=4294967295+r+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=r>>>8*(e?o:3-o)&255}function I(t,r,n,e,o,i){if(n+e>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,r,n,e,i){return i||I(t,0,n,4),o.write(t,r,n,e,23,4),n+4}function k(t,r,n,e,i){return i||I(t,0,n,8),o.write(t,r,n,e,52,8),n+8}f.prototype.slice=function(t,r){var n,e=this.length;if((t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(r=void 0===r?e:~~r)<0?(r+=e)<0&&(r=0):r>e&&(r=e),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,r)).__proto__=f.prototype;else{var o=r-t;n=new f(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},f.prototype.readUIntLE=function(t,r,n){t|=0,r|=0,n||B(t,r,this.length);for(var e=this[t],o=1,i=0;++i<r&&(o*=256);)e+=this[t+i]*o;return e},f.prototype.readUIntBE=function(t,r,n){t|=0,r|=0,n||B(t,r,this.length);for(var e=this[t+--r],o=1;r>0&&(o*=256);)e+=this[t+--r]*o;return e},f.prototype.readUInt8=function(t,r){return r||B(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||B(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||B(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,n){t|=0,r|=0,n||B(t,r,this.length);for(var e=this[t],o=1,i=0;++i<r&&(o*=256);)e+=this[t+i]*o;return e>=(o*=128)&&(e-=Math.pow(2,8*r)),e},f.prototype.readIntBE=function(t,r,n){t|=0,r|=0,n||B(t,r,this.length);for(var e=r,o=1,i=this[t+--e];e>0&&(o*=256);)i+=this[t+--e]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*r)),i},f.prototype.readInt8=function(t,r){return r||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(t,r){r||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(t,r){return r||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||B(t,4,this.length),o.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||B(t,4,this.length),o.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||B(t,8,this.length),o.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||B(t,8,this.length),o.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,n,e){(t=+t,r|=0,n|=0,e)||C(this,t,r,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[r]=255&t;++i<n&&(o*=256);)this[r+i]=t/o&255;return r+n},f.prototype.writeUIntBE=function(t,r,n,e){(t=+t,r|=0,n|=0,e)||C(this,t,r,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[r+o]=255&t;--o>=0&&(i*=256);)this[r+o]=t/i&255;return r+n},f.prototype.writeUInt8=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):j(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):j(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):U(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):U(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,n,e){if(t=+t,r|=0,!e){var o=Math.pow(2,8*n-1);C(this,t,r,n,o-1,-o)}var i=0,u=1,a=0;for(this[r]=255&t;++i<n&&(u*=256);)t<0&&0===a&&0!==this[r+i-1]&&(a=1),this[r+i]=(t/u>>0)-a&255;return r+n},f.prototype.writeIntBE=function(t,r,n,e){if(t=+t,r|=0,!e){var o=Math.pow(2,8*n-1);C(this,t,r,n,o-1,-o)}var i=n-1,u=1,a=0;for(this[r+i]=255&t;--i>=0&&(u*=256);)t<0&&0===a&&0!==this[r+i+1]&&(a=1),this[r+i]=(t/u>>0)-a&255;return r+n},f.prototype.writeInt8=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):j(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):j(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):U(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,n){return t=+t,r|=0,n||C(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):U(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,n){return D(this,t,r,!0,n)},f.prototype.writeFloatBE=function(t,r,n){return D(this,t,r,!1,n)},f.prototype.writeDoubleLE=function(t,r,n){return k(this,t,r,!0,n)},f.prototype.writeDoubleBE=function(t,r,n){return k(this,t,r,!1,n)},f.prototype.copy=function(t,r,n,e){if(n||(n=0),e||0===e||(e=this.length),r>=t.length&&(r=t.length),r||(r=0),e>0&&e<n&&(e=n),e===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),t.length-r<e-n&&(e=t.length-r+n);var o,i=e-n;if(this===t&&n<r&&r<e)for(o=i-1;o>=0;--o)t[o+r]=this[o+n];else if(i<1e3||!f.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+r]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),r);return i},f.prototype.fill=function(t,r,n,e){if("string"==typeof t){if("string"==typeof r?(e=r,r=0,n=this.length):"string"==typeof n&&(e=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==e&&"string"!=typeof e)throw new TypeError("encoding must be a string");if("string"==typeof e&&!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var i;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=r;i<n;++i)this[i]=t;else{var u=f.isBuffer(t)?t:F(new f(t,e).toString()),a=u.length;for(i=0;i<n-r;++i)this[i+r]=u[i%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,r){var n;r=r||1/0;for(var e=t.length,o=null,i=[],u=0;u<e;++u){if((n=t.charCodeAt(u))>55295&&n<57344){if(!o){if(n>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(u+1===e){(r-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(r-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(r-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((r-=1)<0)break;i.push(n)}else if(n<2048){if((r-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function q(t){return e.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,r,n,e){for(var o=0;o<e&&!(o+n>=r.length||o>=t.length);++o)r[o+n]=t[o];return o}}).call(this,n(10))},function(t,r){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,r,n){"use strict";r.byteLength=function(t){var r=c(t),n=r[0],e=r[1];return 3*(n+e)/4-e},r.toByteArray=function(t){for(var r,n=c(t),e=n[0],u=n[1],a=new i(function(t,r,n){return 3*(r+n)/4-n}(0,e,u)),f=0,s=u>0?e-4:e,h=0;h<s;h+=4)r=o[t.charCodeAt(h)]<<18|o[t.charCodeAt(h+1)]<<12|o[t.charCodeAt(h+2)]<<6|o[t.charCodeAt(h+3)],a[f++]=r>>16&255,a[f++]=r>>8&255,a[f++]=255&r;2===u&&(r=o[t.charCodeAt(h)]<<2|o[t.charCodeAt(h+1)]>>4,a[f++]=255&r);1===u&&(r=o[t.charCodeAt(h)]<<10|o[t.charCodeAt(h+1)]<<4|o[t.charCodeAt(h+2)]>>2,a[f++]=r>>8&255,a[f++]=255&r);return a},r.fromByteArray=function(t){for(var r,n=t.length,o=n%3,i=[],u=0,a=n-o;u<a;u+=16383)i.push(s(t,u,u+16383>a?a:u+16383));1===o?(r=t[n-1],i.push(e[r>>2]+e[r<<4&63]+"==")):2===o&&(r=(t[n-2]<<8)+t[n-1],i.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"="));return i.join("")};for(var e=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,f=u.length;a<f;++a)e[a]=u[a],o[u.charCodeAt(a)]=a;function c(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=r),[n,n===r?0:4-n%4]}function s(t,r,n){for(var o,i,u=[],a=r;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),u.push(e[(i=o)>>18&63]+e[i>>12&63]+e[i>>6&63]+e[63&i]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,r){r.read=function(t,r,n,e,o){var i,u,a=8*o-e-1,f=(1<<a)-1,c=f>>1,s=-7,h=n?o-1:0,l=n?-1:1,p=t[r+h];for(h+=l,i=p&(1<<-s)-1,p>>=-s,s+=a;s>0;i=256*i+t[r+h],h+=l,s-=8);for(u=i&(1<<-s)-1,i>>=-s,s+=e;s>0;u=256*u+t[r+h],h+=l,s-=8);if(0===i)i=1-c;else{if(i===f)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,e),i-=c}return(p?-1:1)*u*Math.pow(2,i-e)},r.write=function(t,r,n,e,o,i){var u,a,f,c=8*i-o-1,s=(1<<c)-1,h=s>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=e?0:i-1,d=e?1:-1,y=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,u=s):(u=Math.floor(Math.log(r)/Math.LN2),r*(f=Math.pow(2,-u))<1&&(u--,f*=2),(r+=u+h>=1?l/f:l*Math.pow(2,1-h))*f>=2&&(u++,f/=2),u+h>=s?(a=0,u=s):u+h>=1?(a=(r*f-1)*Math.pow(2,o),u+=h):(a=r*Math.pow(2,h-1)*Math.pow(2,o),u=0));o>=8;t[n+p]=255&a,p+=d,a/=256,o-=8);for(u=u<<o|a,c+=o;c>0;t[n+p]=255&u,p+=d,u/=256,c-=8);t[n+p-d]|=128*y}},function(t,r){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,r,n){"use strict";n.r(r);var e={};n.r(e),n.d(e,"create",function(){return s}),n.d(e,"fromMat4",function(){return h}),n.d(e,"clone",function(){return l}),n.d(e,"copy",function(){return p}),n.d(e,"fromValues",function(){return d}),n.d(e,"set",function(){return y}),n.d(e,"identity",function(){return v}),n.d(e,"transpose",function(){return b}),n.d(e,"invert",function(){return m}),n.d(e,"adjoint",function(){return g}),n.d(e,"determinant",function(){return M}),n.d(e,"multiply",function(){return w}),n.d(e,"translate",function(){return E}),n.d(e,"rotate",function(){return A}),n.d(e,"scale",function(){return _}),n.d(e,"fromTranslation",function(){return S}),n.d(e,"fromRotation",function(){return x}),n.d(e,"fromScaling",function(){return P}),n.d(e,"fromMat2d",function(){return R}),n.d(e,"fromQuat",function(){return T}),n.d(e,"normalFromMat4",function(){return O}),n.d(e,"projection",function(){return B}),n.d(e,"str",function(){return C}),n.d(e,"frob",function(){return j}),n.d(e,"add",function(){return U}),n.d(e,"subtract",function(){return I}),n.d(e,"multiplyScalar",function(){return D}),n.d(e,"multiplyScalarAndAdd",function(){return k}),n.d(e,"exactEquals",function(){return L}),n.d(e,"equals",function(){return Y}),n.d(e,"mul",function(){return F}),n.d(e,"sub",function(){return q});var o={};n.r(o),n.d(o,"create",function(){return V}),n.d(o,"clone",function(){return N}),n.d(o,"copy",function(){return z}),n.d(o,"fromValues",function(){return X}),n.d(o,"set",function(){return Q}),n.d(o,"identity",function(){return G}),n.d(o,"transpose",function(){return H}),n.d(o,"invert",function(){return W}),n.d(o,"adjoint",function(){return Z}),n.d(o,"determinant",function(){return $}),n.d(o,"multiply",function(){return J}),n.d(o,"translate",function(){return K}),n.d(o,"scale",function(){return tt}),n.d(o,"rotate",function(){return rt}),n.d(o,"rotateX",function(){return nt}),n.d(o,"rotateY",function(){return et}),n.d(o,"rotateZ",function(){return ot}),n.d(o,"fromTranslation",function(){return it}),n.d(o,"fromScaling",function(){return ut}),n.d(o,"fromRotation",function(){return at}),n.d(o,"fromXRotation",function(){return ft}),n.d(o,"fromYRotation",function(){return ct}),n.d(o,"fromZRotation",function(){return st}),n.d(o,"fromRotationTranslation",function(){return ht}),n.d(o,"fromQuat2",function(){return lt}),n.d(o,"getTranslation",function(){return pt}),n.d(o,"getScaling",function(){return dt}),n.d(o,"getRotation",function(){return yt}),n.d(o,"fromRotationTranslationScale",function(){return vt}),n.d(o,"fromRotationTranslationScaleOrigin",function(){return bt}),n.d(o,"fromQuat",function(){return mt}),n.d(o,"frustum",function(){return gt}),n.d(o,"perspective",function(){return Mt}),n.d(o,"perspectiveFromFieldOfView",function(){return wt}),n.d(o,"ortho",function(){return Et}),n.d(o,"lookAt",function(){return At}),n.d(o,"targetTo",function(){return _t}),n.d(o,"str",function(){return St}),n.d(o,"frob",function(){return xt}),n.d(o,"add",function(){return Pt}),n.d(o,"subtract",function(){return Rt}),n.d(o,"multiplyScalar",function(){return Tt}),n.d(o,"multiplyScalarAndAdd",function(){return Ot}),n.d(o,"exactEquals",function(){return Bt}),n.d(o,"equals",function(){return Ct}),n.d(o,"mul",function(){return jt}),n.d(o,"sub",function(){return Ut});var i={};n.r(i),n.d(i,"create",function(){return It}),n.d(i,"clone",function(){return Dt}),n.d(i,"length",function(){return kt}),n.d(i,"fromValues",function(){return Lt}),n.d(i,"copy",function(){return Yt}),n.d(i,"set",function(){return Ft}),n.d(i,"add",function(){return qt}),n.d(i,"subtract",function(){return Vt}),n.d(i,"multiply",function(){return Nt}),n.d(i,"divide",function(){return zt}),n.d(i,"ceil",function(){return Xt}),n.d(i,"floor",function(){return Qt}),n.d(i,"min",function(){return Gt}),n.d(i,"max",function(){return Ht}),n.d(i,"round",function(){return Wt}),n.d(i,"scale",function(){return Zt}),n.d(i,"scaleAndAdd",function(){return $t}),n.d(i,"distance",function(){return Jt}),n.d(i,"squaredDistance",function(){return Kt}),n.d(i,"squaredLength",function(){return tr}),n.d(i,"negate",function(){return rr}),n.d(i,"inverse",function(){return nr}),n.d(i,"normalize",function(){return er}),n.d(i,"dot",function(){return or}),n.d(i,"cross",function(){return ir}),n.d(i,"lerp",function(){return ur}),n.d(i,"hermite",function(){return ar}),n.d(i,"bezier",function(){return fr}),n.d(i,"random",function(){return cr}),n.d(i,"transformMat4",function(){return sr}),n.d(i,"transformMat3",function(){return hr}),n.d(i,"transformQuat",function(){return lr}),n.d(i,"rotateX",function(){return pr}),n.d(i,"rotateY",function(){return dr}),n.d(i,"rotateZ",function(){return yr}),n.d(i,"angle",function(){return vr}),n.d(i,"zero",function(){return br}),n.d(i,"str",function(){return mr}),n.d(i,"exactEquals",function(){return gr}),n.d(i,"equals",function(){return Mr}),n.d(i,"sub",function(){return Er}),n.d(i,"mul",function(){return Ar}),n.d(i,"div",function(){return _r}),n.d(i,"dist",function(){return Sr}),n.d(i,"sqrDist",function(){return xr}),n.d(i,"len",function(){return Pr}),n.d(i,"sqrLen",function(){return Rr}),n.d(i,"forEach",function(){return Tr});var u={};n.r(u),n.d(u,"create",function(){return Cr}),n.d(u,"identity",function(){return jr}),n.d(u,"setAxisAngle",function(){return Ur}),n.d(u,"getAxisAngle",function(){return Ir}),n.d(u,"multiply",function(){return Dr}),n.d(u,"rotateX",function(){return kr}),n.d(u,"rotateY",function(){return Lr}),n.d(u,"rotateZ",function(){return Yr}),n.d(u,"calculateW",function(){return Fr}),n.d(u,"slerp",function(){return qr}),n.d(u,"random",function(){return Vr}),n.d(u,"invert",function(){return Nr}),n.d(u,"conjugate",function(){return zr}),n.d(u,"fromMat3",function(){return Xr}),n.d(u,"fromEuler",function(){return Qr}),n.d(u,"str",function(){return Gr}),n.d(u,"clone",function(){return tn}),n.d(u,"fromValues",function(){return rn}),n.d(u,"copy",function(){return nn}),n.d(u,"set",function(){return en}),n.d(u,"add",function(){return on}),n.d(u,"mul",function(){return un}),n.d(u,"scale",function(){return an}),n.d(u,"dot",function(){return fn}),n.d(u,"lerp",function(){return cn}),n.d(u,"length",function(){return sn}),n.d(u,"len",function(){return hn}),n.d(u,"squaredLength",function(){return ln}),n.d(u,"sqrLen",function(){return pn}),n.d(u,"normalize",function(){return dn}),n.d(u,"exactEquals",function(){return yn}),n.d(u,"equals",function(){return vn}),n.d(u,"rotationTo",function(){return bn}),n.d(u,"sqlerp",function(){return mn}),n.d(u,"setAxes",function(){return gn});var a=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;Math.PI;function s(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function h(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function l(t){var r=new f(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function p(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function d(t,r,n,e,o,i,u,a,c){var s=new f(9);return s[0]=t,s[1]=r,s[2]=n,s[3]=e,s[4]=o,s[5]=i,s[6]=u,s[7]=a,s[8]=c,s}function y(t,r,n,e,o,i,u,a,f,c){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=f,t[8]=c,t}function v(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function b(t,r){if(t===r){var n=r[1],e=r[2],o=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=e,t[7]=o}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function m(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5],f=r[6],c=r[7],s=r[8],h=s*u-a*c,l=-s*i+a*f,p=c*i-u*f,d=n*h+e*l+o*p;return d?(d=1/d,t[0]=h*d,t[1]=(-s*e+o*c)*d,t[2]=(a*e-o*u)*d,t[3]=l*d,t[4]=(s*n-o*f)*d,t[5]=(-a*n+o*i)*d,t[6]=p*d,t[7]=(-c*n+e*f)*d,t[8]=(u*n-e*i)*d,t):null}function g(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5],f=r[6],c=r[7],s=r[8];return t[0]=u*s-a*c,t[1]=o*c-e*s,t[2]=e*a-o*u,t[3]=a*f-i*s,t[4]=n*s-o*f,t[5]=o*i-n*a,t[6]=i*c-u*f,t[7]=e*f-n*c,t[8]=n*u-e*i,t}function M(t){var r=t[0],n=t[1],e=t[2],o=t[3],i=t[4],u=t[5],a=t[6],f=t[7],c=t[8];return r*(c*i-u*f)+n*(-c*o+u*a)+e*(f*o-i*a)}function w(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=r[4],f=r[5],c=r[6],s=r[7],h=r[8],l=n[0],p=n[1],d=n[2],y=n[3],v=n[4],b=n[5],m=n[6],g=n[7],M=n[8];return t[0]=l*e+p*u+d*c,t[1]=l*o+p*a+d*s,t[2]=l*i+p*f+d*h,t[3]=y*e+v*u+b*c,t[4]=y*o+v*a+b*s,t[5]=y*i+v*f+b*h,t[6]=m*e+g*u+M*c,t[7]=m*o+g*a+M*s,t[8]=m*i+g*f+M*h,t}function E(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=r[4],f=r[5],c=r[6],s=r[7],h=r[8],l=n[0],p=n[1];return t[0]=e,t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=f,t[6]=l*e+p*u+c,t[7]=l*o+p*a+s,t[8]=l*i+p*f+h,t}function A(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=r[4],f=r[5],c=r[6],s=r[7],h=r[8],l=Math.sin(n),p=Math.cos(n);return t[0]=p*e+l*u,t[1]=p*o+l*a,t[2]=p*i+l*f,t[3]=p*u-l*e,t[4]=p*a-l*o,t[5]=p*f-l*i,t[6]=c,t[7]=s,t[8]=h,t}function _(t,r,n){var e=n[0],o=n[1];return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=o*r[3],t[4]=o*r[4],t[5]=o*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function S(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function x(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function P(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function R(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function T(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=n+n,a=e+e,f=o+o,c=n*u,s=e*u,h=e*a,l=o*u,p=o*a,d=o*f,y=i*u,v=i*a,b=i*f;return t[0]=1-h-d,t[3]=s-b,t[6]=l+v,t[1]=s+b,t[4]=1-c-d,t[7]=p-y,t[2]=l-v,t[5]=p+y,t[8]=1-c-h,t}function O(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5],f=r[6],c=r[7],s=r[8],h=r[9],l=r[10],p=r[11],d=r[12],y=r[13],v=r[14],b=r[15],m=n*a-e*u,g=n*f-o*u,M=n*c-i*u,w=e*f-o*a,E=e*c-i*a,A=o*c-i*f,_=s*y-h*d,S=s*v-l*d,x=s*b-p*d,P=h*v-l*y,R=h*b-p*y,T=l*b-p*v,O=m*T-g*R+M*P+w*x-E*S+A*_;return O?(O=1/O,t[0]=(a*T-f*R+c*P)*O,t[1]=(f*x-u*T-c*S)*O,t[2]=(u*R-a*x+c*_)*O,t[3]=(o*R-e*T-i*P)*O,t[4]=(n*T-o*x+i*S)*O,t[5]=(e*x-n*R-i*_)*O,t[6]=(y*A-v*E+b*w)*O,t[7]=(v*M-d*A-b*g)*O,t[8]=(d*E-y*M+b*m)*O,t):null}function B(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function C(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function U(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function I(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function D(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function k(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function Y(t,r){var n=t[0],e=t[1],o=t[2],i=t[3],u=t[4],f=t[5],c=t[6],s=t[7],h=t[8],l=r[0],p=r[1],d=r[2],y=r[3],v=r[4],b=r[5],m=r[6],g=r[7],M=r[8];return Math.abs(n-l)<=a*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(e-p)<=a*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(o-d)<=a*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-y)<=a*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(u-v)<=a*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(f-b)<=a*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(c-m)<=a*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-g)<=a*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(h-M)<=a*Math.max(1,Math.abs(h),Math.abs(M))}var F=w,q=I;function V(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function N(t){var r=new f(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function z(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function X(t,r,n,e,o,i,u,a,c,s,h,l,p,d,y,v){var b=new f(16);return b[0]=t,b[1]=r,b[2]=n,b[3]=e,b[4]=o,b[5]=i,b[6]=u,b[7]=a,b[8]=c,b[9]=s,b[10]=h,b[11]=l,b[12]=p,b[13]=d,b[14]=y,b[15]=v,b}function Q(t,r,n,e,o,i,u,a,f,c,s,h,l,p,d,y,v){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=f,t[8]=c,t[9]=s,t[10]=h,t[11]=l,t[12]=p,t[13]=d,t[14]=y,t[15]=v,t}function G(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function H(t,r){if(t===r){var n=r[1],e=r[2],o=r[3],i=r[6],u=r[7],a=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=n,t[6]=r[9],t[7]=r[13],t[8]=e,t[9]=i,t[11]=r[14],t[12]=o,t[13]=u,t[14]=a}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function W(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5],f=r[6],c=r[7],s=r[8],h=r[9],l=r[10],p=r[11],d=r[12],y=r[13],v=r[14],b=r[15],m=n*a-e*u,g=n*f-o*u,M=n*c-i*u,w=e*f-o*a,E=e*c-i*a,A=o*c-i*f,_=s*y-h*d,S=s*v-l*d,x=s*b-p*d,P=h*v-l*y,R=h*b-p*y,T=l*b-p*v,O=m*T-g*R+M*P+w*x-E*S+A*_;return O?(O=1/O,t[0]=(a*T-f*R+c*P)*O,t[1]=(o*R-e*T-i*P)*O,t[2]=(y*A-v*E+b*w)*O,t[3]=(l*E-h*A-p*w)*O,t[4]=(f*x-u*T-c*S)*O,t[5]=(n*T-o*x+i*S)*O,t[6]=(v*M-d*A-b*g)*O,t[7]=(s*A-l*M+p*g)*O,t[8]=(u*R-a*x+c*_)*O,t[9]=(e*x-n*R-i*_)*O,t[10]=(d*E-y*M+b*m)*O,t[11]=(h*M-s*E-p*m)*O,t[12]=(a*S-u*P-f*_)*O,t[13]=(n*P-e*S+o*_)*O,t[14]=(y*g-d*w-v*m)*O,t[15]=(s*w-h*g+l*m)*O,t):null}function Z(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5],f=r[6],c=r[7],s=r[8],h=r[9],l=r[10],p=r[11],d=r[12],y=r[13],v=r[14],b=r[15];return t[0]=a*(l*b-p*v)-h*(f*b-c*v)+y*(f*p-c*l),t[1]=-(e*(l*b-p*v)-h*(o*b-i*v)+y*(o*p-i*l)),t[2]=e*(f*b-c*v)-a*(o*b-i*v)+y*(o*c-i*f),t[3]=-(e*(f*p-c*l)-a*(o*p-i*l)+h*(o*c-i*f)),t[4]=-(u*(l*b-p*v)-s*(f*b-c*v)+d*(f*p-c*l)),t[5]=n*(l*b-p*v)-s*(o*b-i*v)+d*(o*p-i*l),t[6]=-(n*(f*b-c*v)-u*(o*b-i*v)+d*(o*c-i*f)),t[7]=n*(f*p-c*l)-u*(o*p-i*l)+s*(o*c-i*f),t[8]=u*(h*b-p*y)-s*(a*b-c*y)+d*(a*p-c*h),t[9]=-(n*(h*b-p*y)-s*(e*b-i*y)+d*(e*p-i*h)),t[10]=n*(a*b-c*y)-u*(e*b-i*y)+d*(e*c-i*a),t[11]=-(n*(a*p-c*h)-u*(e*p-i*h)+s*(e*c-i*a)),t[12]=-(u*(h*v-l*y)-s*(a*v-f*y)+d*(a*l-f*h)),t[13]=n*(h*v-l*y)-s*(e*v-o*y)+d*(e*l-o*h),t[14]=-(n*(a*v-f*y)-u*(e*v-o*y)+d*(e*f-o*a)),t[15]=n*(a*l-f*h)-u*(e*l-o*h)+s*(e*f-o*a),t}function $(t){var r=t[0],n=t[1],e=t[2],o=t[3],i=t[4],u=t[5],a=t[6],f=t[7],c=t[8],s=t[9],h=t[10],l=t[11],p=t[12],d=t[13],y=t[14],v=t[15];return(r*u-n*i)*(h*v-l*y)-(r*a-e*i)*(s*v-l*d)+(r*f-o*i)*(s*y-h*d)+(n*a-e*u)*(c*v-l*p)-(n*f-o*u)*(c*y-h*p)+(e*f-o*a)*(c*d-s*p)}function J(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=r[4],f=r[5],c=r[6],s=r[7],h=r[8],l=r[9],p=r[10],d=r[11],y=r[12],v=r[13],b=r[14],m=r[15],g=n[0],M=n[1],w=n[2],E=n[3];return t[0]=g*e+M*a+w*h+E*y,t[1]=g*o+M*f+w*l+E*v,t[2]=g*i+M*c+w*p+E*b,t[3]=g*u+M*s+w*d+E*m,g=n[4],M=n[5],w=n[6],E=n[7],t[4]=g*e+M*a+w*h+E*y,t[5]=g*o+M*f+w*l+E*v,t[6]=g*i+M*c+w*p+E*b,t[7]=g*u+M*s+w*d+E*m,g=n[8],M=n[9],w=n[10],E=n[11],t[8]=g*e+M*a+w*h+E*y,t[9]=g*o+M*f+w*l+E*v,t[10]=g*i+M*c+w*p+E*b,t[11]=g*u+M*s+w*d+E*m,g=n[12],M=n[13],w=n[14],E=n[15],t[12]=g*e+M*a+w*h+E*y,t[13]=g*o+M*f+w*l+E*v,t[14]=g*i+M*c+w*p+E*b,t[15]=g*u+M*s+w*d+E*m,t}function K(t,r,n){var e,o,i,u,a,f,c,s,h,l,p,d,y=n[0],v=n[1],b=n[2];return r===t?(t[12]=r[0]*y+r[4]*v+r[8]*b+r[12],t[13]=r[1]*y+r[5]*v+r[9]*b+r[13],t[14]=r[2]*y+r[6]*v+r[10]*b+r[14],t[15]=r[3]*y+r[7]*v+r[11]*b+r[15]):(e=r[0],o=r[1],i=r[2],u=r[3],a=r[4],f=r[5],c=r[6],s=r[7],h=r[8],l=r[9],p=r[10],d=r[11],t[0]=e,t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=f,t[6]=c,t[7]=s,t[8]=h,t[9]=l,t[10]=p,t[11]=d,t[12]=e*y+a*v+h*b+r[12],t[13]=o*y+f*v+l*b+r[13],t[14]=i*y+c*v+p*b+r[14],t[15]=u*y+s*v+d*b+r[15]),t}function tt(t,r,n){var e=n[0],o=n[1],i=n[2];return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=r[7]*o,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function rt(t,r,n,e){var o,i,u,f,c,s,h,l,p,d,y,v,b,m,g,M,w,E,A,_,S,x,P,R,T=e[0],O=e[1],B=e[2],C=Math.sqrt(T*T+O*O+B*B);return C<a?null:(T*=C=1/C,O*=C,B*=C,o=Math.sin(n),u=1-(i=Math.cos(n)),f=r[0],c=r[1],s=r[2],h=r[3],l=r[4],p=r[5],d=r[6],y=r[7],v=r[8],b=r[9],m=r[10],g=r[11],M=T*T*u+i,w=O*T*u+B*o,E=B*T*u-O*o,A=T*O*u-B*o,_=O*O*u+i,S=B*O*u+T*o,x=T*B*u+O*o,P=O*B*u-T*o,R=B*B*u+i,t[0]=f*M+l*w+v*E,t[1]=c*M+p*w+b*E,t[2]=s*M+d*w+m*E,t[3]=h*M+y*w+g*E,t[4]=f*A+l*_+v*S,t[5]=c*A+p*_+b*S,t[6]=s*A+d*_+m*S,t[7]=h*A+y*_+g*S,t[8]=f*x+l*P+v*R,t[9]=c*x+p*P+b*R,t[10]=s*x+d*P+m*R,t[11]=h*x+y*P+g*R,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function nt(t,r,n){var e=Math.sin(n),o=Math.cos(n),i=r[4],u=r[5],a=r[6],f=r[7],c=r[8],s=r[9],h=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=i*o+c*e,t[5]=u*o+s*e,t[6]=a*o+h*e,t[7]=f*o+l*e,t[8]=c*o-i*e,t[9]=s*o-u*e,t[10]=h*o-a*e,t[11]=l*o-f*e,t}function et(t,r,n){var e=Math.sin(n),o=Math.cos(n),i=r[0],u=r[1],a=r[2],f=r[3],c=r[8],s=r[9],h=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*o-c*e,t[1]=u*o-s*e,t[2]=a*o-h*e,t[3]=f*o-l*e,t[8]=i*e+c*o,t[9]=u*e+s*o,t[10]=a*e+h*o,t[11]=f*e+l*o,t}function ot(t,r,n){var e=Math.sin(n),o=Math.cos(n),i=r[0],u=r[1],a=r[2],f=r[3],c=r[4],s=r[5],h=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*o+c*e,t[1]=u*o+s*e,t[2]=a*o+h*e,t[3]=f*o+l*e,t[4]=c*o-i*e,t[5]=s*o-u*e,t[6]=h*o-a*e,t[7]=l*o-f*e,t}function it(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ut(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function at(t,r,n){var e,o,i,u=n[0],f=n[1],c=n[2],s=Math.sqrt(u*u+f*f+c*c);return s<a?null:(u*=s=1/s,f*=s,c*=s,e=Math.sin(r),i=1-(o=Math.cos(r)),t[0]=u*u*i+o,t[1]=f*u*i+c*e,t[2]=c*u*i-f*e,t[3]=0,t[4]=u*f*i-c*e,t[5]=f*f*i+o,t[6]=c*f*i+u*e,t[7]=0,t[8]=u*c*i+f*e,t[9]=f*c*i-u*e,t[10]=c*c*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ft(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function st(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ht(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=e+e,f=o+o,c=i+i,s=e*a,h=e*f,l=e*c,p=o*f,d=o*c,y=i*c,v=u*a,b=u*f,m=u*c;return t[0]=1-(p+y),t[1]=h+m,t[2]=l-b,t[3]=0,t[4]=h-m,t[5]=1-(s+y),t[6]=d+v,t[7]=0,t[8]=l+b,t[9]=d-v,t[10]=1-(s+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function lt(t,r){var n=new f(3),e=-r[0],o=-r[1],i=-r[2],u=r[3],a=r[4],c=r[5],s=r[6],h=r[7],l=e*e+o*o+i*i+u*u;return l>0?(n[0]=2*(a*u+h*e+c*i-s*o)/l,n[1]=2*(c*u+h*o+s*e-a*i)/l,n[2]=2*(s*u+h*i+a*o-c*e)/l):(n[0]=2*(a*u+h*e+c*i-s*o),n[1]=2*(c*u+h*o+s*e-a*i),n[2]=2*(s*u+h*i+a*o-c*e)),ht(t,r,n),t}function pt(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function dt(t,r){var n=r[0],e=r[1],o=r[2],i=r[4],u=r[5],a=r[6],f=r[8],c=r[9],s=r[10];return t[0]=Math.sqrt(n*n+e*e+o*o),t[1]=Math.sqrt(i*i+u*u+a*a),t[2]=Math.sqrt(f*f+c*c+s*s),t}function yt(t,r){var n=r[0]+r[5]+r[10],e=0;return n>0?(e=2*Math.sqrt(n+1),t[3]=.25*e,t[0]=(r[6]-r[9])/e,t[1]=(r[8]-r[2])/e,t[2]=(r[1]-r[4])/e):r[0]>r[5]&&r[0]>r[10]?(e=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/e,t[0]=.25*e,t[1]=(r[1]+r[4])/e,t[2]=(r[8]+r[2])/e):r[5]>r[10]?(e=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/e,t[0]=(r[1]+r[4])/e,t[1]=.25*e,t[2]=(r[6]+r[9])/e):(e=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/e,t[0]=(r[8]+r[2])/e,t[1]=(r[6]+r[9])/e,t[2]=.25*e),t}function vt(t,r,n,e){var o=r[0],i=r[1],u=r[2],a=r[3],f=o+o,c=i+i,s=u+u,h=o*f,l=o*c,p=o*s,d=i*c,y=i*s,v=u*s,b=a*f,m=a*c,g=a*s,M=e[0],w=e[1],E=e[2];return t[0]=(1-(d+v))*M,t[1]=(l+g)*M,t[2]=(p-m)*M,t[3]=0,t[4]=(l-g)*w,t[5]=(1-(h+v))*w,t[6]=(y+b)*w,t[7]=0,t[8]=(p+m)*E,t[9]=(y-b)*E,t[10]=(1-(h+d))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function bt(t,r,n,e,o){var i=r[0],u=r[1],a=r[2],f=r[3],c=i+i,s=u+u,h=a+a,l=i*c,p=i*s,d=i*h,y=u*s,v=u*h,b=a*h,m=f*c,g=f*s,M=f*h,w=e[0],E=e[1],A=e[2],_=o[0],S=o[1],x=o[2],P=(1-(y+b))*w,R=(p+M)*w,T=(d-g)*w,O=(p-M)*E,B=(1-(l+b))*E,C=(v+m)*E,j=(d+g)*A,U=(v-m)*A,I=(1-(l+y))*A;return t[0]=P,t[1]=R,t[2]=T,t[3]=0,t[4]=O,t[5]=B,t[6]=C,t[7]=0,t[8]=j,t[9]=U,t[10]=I,t[11]=0,t[12]=n[0]+_-(P*_+O*S+j*x),t[13]=n[1]+S-(R*_+B*S+U*x),t[14]=n[2]+x-(T*_+C*S+I*x),t[15]=1,t}function mt(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=n+n,a=e+e,f=o+o,c=n*u,s=e*u,h=e*a,l=o*u,p=o*a,d=o*f,y=i*u,v=i*a,b=i*f;return t[0]=1-h-d,t[1]=s+b,t[2]=l-v,t[3]=0,t[4]=s-b,t[5]=1-c-d,t[6]=p+y,t[7]=0,t[8]=l+v,t[9]=p-y,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gt(t,r,n,e,o,i,u){var a=1/(n-r),f=1/(o-e),c=1/(i-u);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*f,t[6]=0,t[7]=0,t[8]=(n+r)*a,t[9]=(o+e)*f,t[10]=(u+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*c,t[15]=0,t}function Mt(t,r,n,e,o){var i,u=1/Math.tan(r/2);return t[0]=u/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(e-o),t[10]=(o+e)*i,t[14]=2*o*e*i):(t[10]=-1,t[14]=-2*e),t}function wt(t,r,n,e){var o=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),u=Math.tan(r.leftDegrees*Math.PI/180),a=Math.tan(r.rightDegrees*Math.PI/180),f=2/(u+a),c=2/(o+i);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-a)*f*.5,t[9]=(o-i)*c*.5,t[10]=e/(n-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*n/(n-e),t[15]=0,t}function Et(t,r,n,e,o,i,u){var a=1/(r-n),f=1/(e-o),c=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+n)*a,t[13]=(o+e)*f,t[14]=(u+i)*c,t[15]=1,t}function At(t,r,n,e){var o,i,u,f,c,s,h,l,p,d,y=r[0],v=r[1],b=r[2],m=e[0],g=e[1],M=e[2],w=n[0],E=n[1],A=n[2];return Math.abs(y-w)<a&&Math.abs(v-E)<a&&Math.abs(b-A)<a?G(t):(h=y-w,l=v-E,p=b-A,o=g*(p*=d=1/Math.sqrt(h*h+l*l+p*p))-M*(l*=d),i=M*(h*=d)-m*p,u=m*l-g*h,(d=Math.sqrt(o*o+i*i+u*u))?(o*=d=1/d,i*=d,u*=d):(o=0,i=0,u=0),f=l*u-p*i,c=p*o-h*u,s=h*i-l*o,(d=Math.sqrt(f*f+c*c+s*s))?(f*=d=1/d,c*=d,s*=d):(f=0,c=0,s=0),t[0]=o,t[1]=f,t[2]=h,t[3]=0,t[4]=i,t[5]=c,t[6]=l,t[7]=0,t[8]=u,t[9]=s,t[10]=p,t[11]=0,t[12]=-(o*y+i*v+u*b),t[13]=-(f*y+c*v+s*b),t[14]=-(h*y+l*v+p*b),t[15]=1,t)}function _t(t,r,n,e){var o=r[0],i=r[1],u=r[2],a=e[0],f=e[1],c=e[2],s=o-n[0],h=i-n[1],l=u-n[2],p=s*s+h*h+l*l;p>0&&(s*=p=1/Math.sqrt(p),h*=p,l*=p);var d=f*l-c*h,y=c*s-a*l,v=a*h-f*s;return(p=d*d+y*y+v*v)>0&&(d*=p=1/Math.sqrt(p),y*=p,v*=p),t[0]=d,t[1]=y,t[2]=v,t[3]=0,t[4]=h*v-l*y,t[5]=l*d-s*v,t[6]=s*y-h*d,t[7]=0,t[8]=s,t[9]=h,t[10]=l,t[11]=0,t[12]=o,t[13]=i,t[14]=u,t[15]=1,t}function St(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function xt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Pt(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t[9]=r[9]+n[9],t[10]=r[10]+n[10],t[11]=r[11]+n[11],t[12]=r[12]+n[12],t[13]=r[13]+n[13],t[14]=r[14]+n[14],t[15]=r[15]+n[15],t}function Rt(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t[9]=r[9]-n[9],t[10]=r[10]-n[10],t[11]=r[11]-n[11],t[12]=r[12]-n[12],t[13]=r[13]-n[13],t[14]=r[14]-n[14],t[15]=r[15]-n[15],t}function Tt(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=r[11]*n,t[12]=r[12]*n,t[13]=r[13]*n,t[14]=r[14]*n,t[15]=r[15]*n,t}function Ot(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t[9]=r[9]+n[9]*e,t[10]=r[10]+n[10]*e,t[11]=r[11]+n[11]*e,t[12]=r[12]+n[12]*e,t[13]=r[13]+n[13]*e,t[14]=r[14]+n[14]*e,t[15]=r[15]+n[15]*e,t}function Bt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function Ct(t,r){var n=t[0],e=t[1],o=t[2],i=t[3],u=t[4],f=t[5],c=t[6],s=t[7],h=t[8],l=t[9],p=t[10],d=t[11],y=t[12],v=t[13],b=t[14],m=t[15],g=r[0],M=r[1],w=r[2],E=r[3],A=r[4],_=r[5],S=r[6],x=r[7],P=r[8],R=r[9],T=r[10],O=r[11],B=r[12],C=r[13],j=r[14],U=r[15];return Math.abs(n-g)<=a*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(e-M)<=a*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(o-w)<=a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-E)<=a*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(u-A)<=a*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(f-_)<=a*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(c-S)<=a*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(s-x)<=a*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(h-P)<=a*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(l-R)<=a*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(p-T)<=a*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(d-O)<=a*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-B)<=a*Math.max(1,Math.abs(y),Math.abs(B))&&Math.abs(v-C)<=a*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(b-j)<=a*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(m-U)<=a*Math.max(1,Math.abs(m),Math.abs(U))}var jt=J,Ut=Rt;function It(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Dt(t){var r=new f(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function kt(t){var r=t[0],n=t[1],e=t[2];return Math.sqrt(r*r+n*n+e*e)}function Lt(t,r,n){var e=new f(3);return e[0]=t,e[1]=r,e[2]=n,e}function Yt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Ft(t,r,n,e){return t[0]=r,t[1]=n,t[2]=e,t}function qt(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function Vt(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t}function Nt(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t}function zt(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t}function Xt(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function Qt(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function Gt(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t}function Ht(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t}function Wt(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function Zt(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t}function $t(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t}function Jt(t,r){var n=r[0]-t[0],e=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(n*n+e*e+o*o)}function Kt(t,r){var n=r[0]-t[0],e=r[1]-t[1],o=r[2]-t[2];return n*n+e*e+o*o}function tr(t){var r=t[0],n=t[1],e=t[2];return r*r+n*n+e*e}function rr(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function nr(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function er(t,r){var n=r[0],e=r[1],o=r[2],i=n*n+e*e+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function or(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function ir(t,r,n){var e=r[0],o=r[1],i=r[2],u=n[0],a=n[1],f=n[2];return t[0]=o*f-i*a,t[1]=i*u-e*f,t[2]=e*a-o*u,t}function ur(t,r,n,e){var o=r[0],i=r[1],u=r[2];return t[0]=o+e*(n[0]-o),t[1]=i+e*(n[1]-i),t[2]=u+e*(n[2]-u),t}function ar(t,r,n,e,o,i){var u=i*i,a=u*(2*i-3)+1,f=u*(i-2)+i,c=u*(i-1),s=u*(3-2*i);return t[0]=r[0]*a+n[0]*f+e[0]*c+o[0]*s,t[1]=r[1]*a+n[1]*f+e[1]*c+o[1]*s,t[2]=r[2]*a+n[2]*f+e[2]*c+o[2]*s,t}function fr(t,r,n,e,o,i){var u=1-i,a=u*u,f=i*i,c=a*u,s=3*i*a,h=3*f*u,l=f*i;return t[0]=r[0]*c+n[0]*s+e[0]*h+o[0]*l,t[1]=r[1]*c+n[1]*s+e[1]*h+o[1]*l,t[2]=r[2]*c+n[2]*s+e[2]*h+o[2]*l,t}function cr(t,r){r=r||1;var n=2*c()*Math.PI,e=2*c()-1,o=Math.sqrt(1-e*e)*r;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=e*r,t}function sr(t,r,n){var e=r[0],o=r[1],i=r[2],u=n[3]*e+n[7]*o+n[11]*i+n[15];return u=u||1,t[0]=(n[0]*e+n[4]*o+n[8]*i+n[12])/u,t[1]=(n[1]*e+n[5]*o+n[9]*i+n[13])/u,t[2]=(n[2]*e+n[6]*o+n[10]*i+n[14])/u,t}function hr(t,r,n){var e=r[0],o=r[1],i=r[2];return t[0]=e*n[0]+o*n[3]+i*n[6],t[1]=e*n[1]+o*n[4]+i*n[7],t[2]=e*n[2]+o*n[5]+i*n[8],t}function lr(t,r,n){var e=n[0],o=n[1],i=n[2],u=n[3],a=r[0],f=r[1],c=r[2],s=o*c-i*f,h=i*a-e*c,l=e*f-o*a,p=o*l-i*h,d=i*s-e*l,y=e*h-o*s,v=2*u;return s*=v,h*=v,l*=v,p*=2,d*=2,y*=2,t[0]=a+s+p,t[1]=f+h+d,t[2]=c+l+y,t}function pr(t,r,n,e){var o=[],i=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(e)-o[2]*Math.sin(e),i[2]=o[1]*Math.sin(e)+o[2]*Math.cos(e),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function dr(t,r,n,e){var o=[],i=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],i[0]=o[2]*Math.sin(e)+o[0]*Math.cos(e),i[1]=o[1],i[2]=o[2]*Math.cos(e)-o[0]*Math.sin(e),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function yr(t,r,n,e){var o=[],i=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],i[0]=o[0]*Math.cos(e)-o[1]*Math.sin(e),i[1]=o[0]*Math.sin(e)+o[1]*Math.cos(e),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function vr(t,r){var n=Lt(t[0],t[1],t[2]),e=Lt(r[0],r[1],r[2]);er(n,n),er(e,e);var o=or(n,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}function br(t){return t[0]=0,t[1]=0,t[2]=0,t}function mr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function gr(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Mr(t,r){var n=t[0],e=t[1],o=t[2],i=r[0],u=r[1],f=r[2];return Math.abs(n-i)<=a*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-u)<=a*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-f)<=a*Math.max(1,Math.abs(o),Math.abs(f))}var wr,Er=Vt,Ar=Nt,_r=zt,Sr=Jt,xr=Kt,Pr=kt,Rr=tr,Tr=(wr=It(),function(t,r,n,e,o,i){var u,a;for(r||(r=3),n||(n=0),a=e?Math.min(e*r+n,t.length):t.length,u=n;u<a;u+=r)wr[0]=t[u],wr[1]=t[u+1],wr[2]=t[u+2],o(wr,wr,i),t[u]=wr[0],t[u+1]=wr[1],t[u+2]=wr[2];return t});function Or(t){var r=t[0],n=t[1],e=t[2],o=t[3];return Math.sqrt(r*r+n*n+e*e+o*o)}function Br(t){var r=t[0],n=t[1],e=t[2],o=t[3];return r*r+n*n+e*e+o*o}!function(){var t,r=(t=new f(4),f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Cr(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function jr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ur(t,r,n){n*=.5;var e=Math.sin(n);return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=Math.cos(n),t}function Ir(t,r){var n=2*Math.acos(r[3]),e=Math.sin(n/2);return e>a?(t[0]=r[0]/e,t[1]=r[1]/e,t[2]=r[2]/e):(t[0]=1,t[1]=0,t[2]=0),n}function Dr(t,r,n){var e=r[0],o=r[1],i=r[2],u=r[3],a=n[0],f=n[1],c=n[2],s=n[3];return t[0]=e*s+u*a+o*c-i*f,t[1]=o*s+u*f+i*a-e*c,t[2]=i*s+u*c+e*f-o*a,t[3]=u*s-e*a-o*f-i*c,t}function kr(t,r,n){n*=.5;var e=r[0],o=r[1],i=r[2],u=r[3],a=Math.sin(n),f=Math.cos(n);return t[0]=e*f+u*a,t[1]=o*f+i*a,t[2]=i*f-o*a,t[3]=u*f-e*a,t}function Lr(t,r,n){n*=.5;var e=r[0],o=r[1],i=r[2],u=r[3],a=Math.sin(n),f=Math.cos(n);return t[0]=e*f-i*a,t[1]=o*f+u*a,t[2]=i*f+e*a,t[3]=u*f-o*a,t}function Yr(t,r,n){n*=.5;var e=r[0],o=r[1],i=r[2],u=r[3],a=Math.sin(n),f=Math.cos(n);return t[0]=e*f+o*a,t[1]=o*f-e*a,t[2]=i*f+u*a,t[3]=u*f-i*a,t}function Fr(t,r){var n=r[0],e=r[1],o=r[2];return t[0]=n,t[1]=e,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-e*e-o*o)),t}function qr(t,r,n,e){var o,i,u,f,c,s=r[0],h=r[1],l=r[2],p=r[3],d=n[0],y=n[1],v=n[2],b=n[3];return(i=s*d+h*y+l*v+p*b)<0&&(i=-i,d=-d,y=-y,v=-v,b=-b),1-i>a?(o=Math.acos(i),u=Math.sin(o),f=Math.sin((1-e)*o)/u,c=Math.sin(e*o)/u):(f=1-e,c=e),t[0]=f*s+c*d,t[1]=f*h+c*y,t[2]=f*l+c*v,t[3]=f*p+c*b,t}function Vr(t){var r=c(),n=c(),e=c(),o=Math.sqrt(1-r),i=Math.sqrt(r);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*e),t[3]=i*Math.cos(2*Math.PI*e),t}function Nr(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=n*n+e*e+o*o+i*i,a=u?1/u:0;return t[0]=-n*a,t[1]=-e*a,t[2]=-o*a,t[3]=i*a,t}function zr(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function Xr(t,r){var n,e=r[0]+r[4]+r[8];if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[3*o+o]&&(o=2);var i=(o+1)%3,u=(o+2)%3;n=Math.sqrt(r[3*o+o]-r[3*i+i]-r[3*u+u]+1),t[o]=.5*n,n=.5/n,t[3]=(r[3*i+u]-r[3*u+i])*n,t[i]=(r[3*i+o]+r[3*o+i])*n,t[u]=(r[3*u+o]+r[3*o+u])*n}return t}function Qr(t,r,n,e){var o=.5*Math.PI/180;r*=o,n*=o,e*=o;var i=Math.sin(r),u=Math.cos(r),a=Math.sin(n),f=Math.cos(n),c=Math.sin(e),s=Math.cos(e);return t[0]=i*f*s-u*a*c,t[1]=u*a*s+i*f*c,t[2]=u*f*c-i*a*s,t[3]=u*f*s+i*a*c,t}function Gr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hr,Wr,Zr,$r,Jr,Kr,tn=function(t){var r=new f(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},rn=function(t,r,n,e){var o=new f(4);return o[0]=t,o[1]=r,o[2]=n,o[3]=e,o},nn=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},en=function(t,r,n,e,o){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t},on=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t},un=Dr,an=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t},fn=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},cn=function(t,r,n,e){var o=r[0],i=r[1],u=r[2],a=r[3];return t[0]=o+e*(n[0]-o),t[1]=i+e*(n[1]-i),t[2]=u+e*(n[2]-u),t[3]=a+e*(n[3]-a),t},sn=Or,hn=sn,ln=Br,pn=ln,dn=function(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=n*n+e*e+o*o+i*i;return u>0&&(u=1/Math.sqrt(u)),t[0]=n*u,t[1]=e*u,t[2]=o*u,t[3]=i*u,t},yn=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},vn=function(t,r){var n=t[0],e=t[1],o=t[2],i=t[3],u=r[0],f=r[1],c=r[2],s=r[3];return Math.abs(n-u)<=a*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-f)<=a*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-c)<=a*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))},bn=(Hr=It(),Wr=Lt(1,0,0),Zr=Lt(0,1,0),function(t,r,n){var e=or(r,n);return e<-.999999?(ir(Hr,Wr,r),Pr(Hr)<1e-6&&ir(Hr,Zr,r),er(Hr,Hr),Ur(t,Hr,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(ir(Hr,r,n),t[0]=Hr[0],t[1]=Hr[1],t[2]=Hr[2],t[3]=1+e,dn(t,t))}),mn=($r=Cr(),Jr=Cr(),function(t,r,n,e,o,i){return qr($r,r,o,i),qr(Jr,n,e,i),qr(t,$r,Jr,2*i*(1-i)),t}),gn=(Kr=s(),function(t,r,n,e){return Kr[0]=n[0],Kr[3]=n[1],Kr[6]=n[2],Kr[1]=e[0],Kr[4]=e[1],Kr[7]=e[2],Kr[2]=-r[0],Kr[5]=-r[1],Kr[8]=-r[2],dn(t,Xr(t,Kr))}),Mn={createVec3:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i.fromValues(t,r,n)},createQuat:function(t,r,n,e){return u.fromValues(t,r,n,e)},createMat4:function(){return o.create()},addVec3:function(t,r,n){return i.add(t,r,n)},quatFromEuler:function(t,r,n,e){return u.fromEuler(t,r,n,e)},multiplyQuat:function(t,r,n){return u.multiply(t,r,n)},mat4LookAt:function(t,r,n,e){return o.lookAt(t,r,n,e)},mat4Perspective:function(t,r,n,e,i){return o.perspective(t,r,n,e,i)},mat4Ortho:function(t,r,n,e,i,u,a){return o.ortho(t,r,n,e,i,u,a)},copyMat4:function(t,r){return o.copy(t,r)},multiplyMat4:function(t,r,n){return o.multiply(t,r,n)},mat4FromQuatPosScl:function(t,r,n,e){return o.fromRotationTranslationScale(t,r,n,e)},normalMatFromMat4:function(t,r){return e.normalFromMat4(t,r)},createMat3:function(){return e.create()}},wn=n(0);function En(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var An=n.n(wn)()(),_n=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=An(),this.parent=null,this.children=[],this.position=Mn.createVec3(),this.scaling=Mn.createVec3(1,1,1),this.quaternion=Mn.createQuat(0,0,0,1),this.transformDirty=!1,this.modelMatrix=Mn.createMat4()}var r,n,e;return r=t,(n=[{key:"addChild",value:function(){for(var t=this,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];n.forEach(function(r){r.parent=t,t.children.push(r)})}},{key:"add",value:function(){this.addChild.apply(this,arguments)}},{key:"getChildren",value:function(){for(var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).recursive,r=[],n=0;n<this.children.length;n++){var e=this.children[n];if(r.push(e),t){var o=e.getChildren({recursive:t});r=r.concat(o)}}return r}},{key:"translate",value:function(t,r,n){this.position=Mn.addVec3(this.position,this.position,Mn.createVec3(t,r,n)),this.transformDirty=!0}},{key:"scale",value:function(t,r,n){this.scaling=Mn.addVec3(this.scaling,this.scaling,Mn.createVec3(t,r,n)),this.transformDirty=!0}},{key:"rotate",value:function(t,r,n){var e=Mn.quatFromEuler(Mn.createQuat(),t,r,n);this.quaternion=Mn.multiplyQuat(this.quaternion,this.quaternion,e),this.transformDirty=!0}},{key:"computeModelMatrix",value:function(t){var r=this.position,n=this.scaling,e=this.quaternion;if(t)if(this.transformDirty){var o=Mn.mat4FromQuatPosScl(Mn.createMat4(),e,r,n);this.modelMatrix=Mn.multiplyMat4(this.modelMatrix,t,o)}else this.modelMatrix=Mn.multiplyMat4(this.modelMatrix,t,this.modelMatrix);else this.transformDirty&&(this.modelMatrix=Mn.mat4FromQuatPosScl(this.modelMatrix,e,r,n));for(var i=0;i<this.children.length;i++)t||this.transformDirty?this.children[i].computeModelMatrix(this.modelMatrix):this.children[i].computeModelMatrix();this.transformDirty=!1}}])&&En(r.prototype,n),e&&En(r,e),t}();function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function Pn(t,r){return!r||"object"!==Sn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t,r){return(Tn=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var On=function(t){function r(){var t;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=Pn(this,Rn(r).call(this))).upVector=Mn.createVec3(0,1,0),t.viewMatrix=Mn.createMat4(),t.projectionMatrix=Mn.createMat4(),t}var n,e,o;return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Tn(t,r)}(r,_n),n=r,(e=[{key:"lookAt",value:function(t,r,n){this.viewMatrix=Mn.mat4LookAt(this.viewMatrix,this.position,Mn.createVec3(t,r,n),this.upVector)}}])&&xn(n.prototype,e),o&&xn(n,o),r}();function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,r){return!r||"object"!==Bn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function jn(t){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,r){return(Un=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var In=function(t){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.ambientColor,o=n.diffuseColor,i=n.specularColor;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=Cn(this,jn(r).call(this))).ambientColor=e||Mn.createVec3(),t.diffuseColor=o||Mn.createVec3(),t.specularColor=i||Mn.createVec3(),t}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Un(t,r)}(r,_n),r}();function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,r){return!r||"object"!==Dn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t,r){return(Yn=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var Fn=function(t){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.direction,o=n.ambientColor,i=n.diffuseColor,u=n.specularColor;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=kn(this,Ln(r).call(this,{ambientColor:o,diffuseColor:i,specularColor:u}))).direction=e||Mn.createVec3(),t}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Yn(t,r)}(r,In),r}();function qn(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Vn=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.positions,e=r.normals,o=r.uvs,i=r.colors;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.positions=n||[],this.normals=e||[],this.uvs=o||[],this.colors=i||[],this.positionsSize=3,this.normalsSize=3,this.uvsSize=2,this.colorsSize=3}var r,n,e;return r=t,(n=[{key:"getPositionBuffer",value:function(){return new Float32Array(this.positions)}},{key:"getPositionBufferSize",value:function(){return this.positionsSize}},{key:"getNormalBuffer",value:function(){return new Float32Array(this.normals)}},{key:"getNormalBufferSize",value:function(){return this.normalsSize}},{key:"getUvBuffer",value:function(){return new Float32Array(this.uvs)}},{key:"getUvBufferSize",value:function(){return this.uvsSize}},{key:"getColorBuffer",value:function(){return new Float32Array(this.colors)}},{key:"getColorBufferSize",value:function(){return this.colorsSize}}])&&qn(r.prototype,n),e&&qn(r,e),t}(),Nn={load:function(t){var r=new Image;return new Promise(function(n){r.onload=function(){return n(r)},r.src=t})}};function zn(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var Xn=function(){function t(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).indices;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.indices=r||[]}var r,n,e;return r=t,(n=[{key:"getIndexBuffer",value:function(){return new Uint32Array(this.indices)}},{key:"getIndexBufferLength",value:function(){return this.indices.length}}])&&zn(r.prototype,n),e&&zn(r,e),t}();function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,r){return!r||"object"!==Qn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wn(t,r){return(Wn=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var Zn=function(t){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.geometry,o=n.materials;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=Gn(this,Hn(r).call(this))).geometry=e,t.materials=o,t}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Wn(t,r)}(r,_n),r}();function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function Kn(t,r){return!r||"object"!==$n(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,r){return(re=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var ne=function(t){function r(t,n,e,o,i,u){var a;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(a=Kn(this,te(r).call(this))).left=t,a.right=n,a.bottom=e,a.top=o,a.near=i,a.far=u,a.updateProjectionMatrix(t,n,e,o,i,u),a}var n,e,o;return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&re(t,r)}(r,On),n=r,(e=[{key:"updateProjectionMatrix",value:function(t,r,n,e,o,i){this.left=t,this.right=r,this.bottom=n,this.top=e,this.near=o,this.far=i,this.projectionMatrix=Mn.mat4Ortho(this.projectionMatrix,t,r,n,e,o,i)}}])&&Jn(n.prototype,e),o&&Jn(n,o),r}();function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function ie(t,r){return!r||"object"!==ee(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,r){return(ae=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var fe=function(t){function r(t,n,e,o){var i;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(i=ie(this,ue(r).call(this))).fov=t,i.aspect=n,i.near=e,i.far=o,i.updateProjectionMatrix(t,n,e,o),i}var n,e,o;return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&ae(t,r)}(r,On),n=r,(e=[{key:"updateProjectionMatrix",value:function(t,r,n,e){this.fov=t,this.aspect=r,this.near=n,this.far=e,this.projectionMatrix=Mn.mat4Perspective(this.projectionMatrix,t,r,n,e)}}])&&oe(n.prototype,e),o&&oe(n,o),r}();function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function he(t,r){return!r||"object"!==ce(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,r){return(pe=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}var de=function(t){function r(){var t;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=he(this,le(r).call(this))).activeCamera=null,t}var n,e,o;return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&pe(t,r)}(r,_n),n=r,(e=[{key:"getChildren",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).recursive,r=this.activeCamera,n=this.children;n.forEach(function(r){n=n.concat(r.getChildren({recursive:t}))});var e=[],o=[],i=[],u=[];return n.forEach(function(t){t instanceof Fn&&e.push(t),t instanceof ne&&o.push(t),t instanceof fe&&i.push(t),t instanceof Zn&&u.push(t)}),{directionalLights:e,orthographicCameras:o,perspectiveCameras:i,activeCamera:r,meshes:u}}},{key:"setActiveCamera",value:function(t){this.activeCamera=t}}])&&se(n.prototype,e),o&&se(n,o),r}();function ye(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ve(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var be={position:function(t,r){return{location:r.position,bufferData:t.getPositionBuffer(),bufferSize:t.getPositionBufferSize()}},normal:function(t,r){return{location:r.normal,bufferData:t.getNormalBuffer(),bufferSize:t.getNormalBufferSize()}},uv:function(t,r){return{location:r.uv,bufferData:t.getUvBuffer(),bufferSize:t.getUvBufferSize()}},color:function(t,r){return{location:r.color,bufferData:t.getColorBuffer(),bufferSize:t.getColorBufferSize()}}},me={meshes:{}},ge=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.domNode,e=r.scene,o=r.options,i=void 0===o?{}:o;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.domNode=n,this.scene=e,this.shaderLocations=i.shaderLocations||{position:0,normal:1,uv:2,color:3},this.depthFunc=i.depthFunc||"LEQUAL",this.enableDepthTest=i.enableDepthTest||!0,this.createAndAppendCanvas(),this.gl=this.canvas.getContext("webgl2"),this.setClearColor(),this.setViewPort(),this.setDepthFunc(this.depthFunc),this.enableDepthTest&&this.gl.enable(this.gl.DEPTH_TEST)}var r,n,e;return r=t,(n=[{key:"createAndAppendCanvas",value:function(){this.canvas=document.createElement("canvas"),this.domNode.appendChild(this.canvas),this.canvas.style.position="relative",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.domNode.clientWidth,this.canvas.height=this.domNode.clientHeight}},{key:"resize",value:function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.setViewPort()}},{key:"setClearColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.gl.clearColor(t,r,n,e)}},{key:"setViewPort",value:function(){this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}},{key:"setDepthFunc",value:function(t){this.gl.depthFunc(this.gl[t])}},{key:"createShader",value:function(t,r){var n=this.gl,e=n.createShader(t);if(n.shaderSource(e,r),n.compileShader(e),n.getShaderParameter(e,n.COMPILE_STATUS))return e;console.error(n.getShaderInfoLog(e)),n.deleteShader(e)}},{key:"createProgram",value:function(t,r){var n=this.gl,e=n.createProgram();if(n.attachShader(e,t),n.attachShader(e,r),n.linkProgram(e),n.getProgramParameter(e,n.LINK_STATUS))return e;console.error(n.getProgramInfoLog(e)),n.deleteProgram(e)}},{key:"createTexture",value:function(t){var r=this.gl,n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);var e=r.RGBA,o=r.RGBA,i=r.UNSIGNED_BYTE;return r.texImage2D(r.TEXTURE_2D,0,e,o,i,t),r.generateMipmap(r.TEXTURE_2D),n}},{key:"createArrayBuffer",value:function(t,r){var n=this.gl,e=this.shaderLocations,o=be[t](r,e),i=o.location,u=o.bufferData,a=o.bufferSize,f=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,f),n.bufferData(n.ARRAY_BUFFER,u,n.STATIC_DRAW),n.enableVertexAttribArray(i),n.vertexAttribPointer(i,a,n.FLOAT,!1,0,0)}},{key:"createVertexArray",value:function(t){var r=this.gl,n=r.createVertexArray();return r.bindVertexArray(n),t.positions.length>0&&this.createArrayBuffer("position",t),t.normals.length>0&&this.createArrayBuffer("normal",t),t.uvs.length>0&&this.createArrayBuffer("uv",t),t.colors.length>0&&this.createArrayBuffer("color",t),n}},{key:"createElementArrayBuffer",value:function(t){var r=this.gl,n=r.createBuffer();return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.getIndexBuffer(),r.STATIC_DRAW),n}},{key:"cacheMesh",value:function(t,r,n){var e=this;console.log("cache mesh called",t.id);var o=this.gl,i=this.shaderLocations,u=t.id,a=t.modelMatrix,f=t.geometry,c=t.materials;me.meshes[u]={vao:this.createVertexArray(f),modelMatrix:a,materials:[]};for(var s=function(t){var a=c[t],f=e.createElementArrayBuffer(a),s=a.getIndexBufferLength(),h=a.getShaderSource({shaderLocations:i,directionalLights:r,camera:n}),l=h.vertexShaderSource,p=h.fragmentShaderSource,d=h.uniforms,y=h.textures,v=e.createShader(o.VERTEX_SHADER,l),b=e.createShader(o.FRAGMENT_SHADER,p),m=e.createProgram(v,b),g=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},e=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.forEach(function(r){ye(t,r,n[r])})}return t}({},d.vertexShader,d.fragmentShader),M=Object.keys(g).filter(function(t){return g[t]}).reduce(function(t,r){return t[r]=o.getUniformLocation(m,r),t},{}),w=Object.keys(y).filter(function(t){return y[t]}).reduce(function(t,r){return t[r]=e.createTexture(y[r]),t},{});me.meshes[u].materials.push({elementIndexBuffer:f,indicesLength:s,shader:m,material:a,uniforms:M,textures:w})},h=0;h<c.length;h++)s(h)}},{key:"render",value:function(){var t=this.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.scene.computeModelMatrix();for(var r=this.scene.getChildren({recursive:!0}),n=r.activeCamera,e=r.meshes,o=r.directionalLights,i=0;i<e.length;i++){var u=e[i];me.meshes[u.id]||this.cacheMesh(u,o,n)}for(var a=Object.values(me.meshes),f=0;f<a.length;f++){var c=a[f];t.bindVertexArray(c.vao);for(var s=Mn.multiplyMat4(Mn.createMat4(),n.viewMatrix,c.modelMatrix),h=Mn.normalMatFromMat4(Mn.createMat3(),s),l=0;l<c.materials.length;l++){var p=c.materials[l];t.useProgram(p.shader);var d=Object.keys(p.uniforms),y=Object.keys(p.textures);d.includes("color")&&t.uniform3fv(p.uniforms.color,p.material.color),d.includes("modelMatrix")&&t.uniformMatrix4fv(p.uniforms.modelMatrix,!1,c.modelMatrix),d.includes("viewMatrix")&&t.uniformMatrix4fv(p.uniforms.viewMatrix,!1,n.viewMatrix),d.includes("projectionMatrix")&&t.uniformMatrix4fv(p.uniforms.projectionMatrix,!1,n.projectionMatrix),d.includes("normalMatrix")&&t.uniformMatrix3fv(p.uniforms.normalMatrix,!1,h),d.includes("cameraPosition")&&t.uniform3fv(p.uniforms.cameraPosition,n.position),d.includes("lightDirection")&&t.uniform3fv(p.uniforms.lightDirection,o[0].direction),d.includes("diffuseMap")&&y.includes("diffuseMap")&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,p.textures.diffuseMap),t.uniform1i(p.uniforms.diffuseMap,0)),d.includes("specularMap")&&y.includes("specularMap")&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,p.textures.specularMap),t.uniform1i(p.uniforms.specularMap,1)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p.elementIndexBuffer),t.drawElements(t.TRIANGLES,p.indicesLength,t.UNSIGNED_INT,0)}}}}])&&ve(r.prototype,n),e&&ve(r,e),t}();n.d(r,"MASSIV",function(){return Me});var Me={Camera:On,DirectionalLight:Fn,Geometry:Vn,ImageLoader:Nn,Material:Xn,MathUtils:Mn,Mesh:Zn,Node3D:_n,OrthographicCamera:ne,PerspectiveCamera:fe,Scene:de,WebGLRenderer:ge}}])});